We are pleased to announce the release of API Gateway 2.4.0, the biggest release since the release 2.0.0 which introduced the modular architecture.
This release introduces the new, entirely Istio-based `v2alpha1` version of the APIRule CustomResourceDefinition (CRD) and custom resource (CR).
The new version of the APIRule CRD is a significant step towards a stable API Gateway API.

## The Status of the `APIRule` CRD in Version `v1beta1`

The `APIRule` CRD in version `v1beta1` is now deprecated and will be removed in the future.
Version `v1beta1` is still supported, but it is recommended to migrate to the new version `v2alpha1` as soon as possible.

## Version `v2alpha1` of the APIRule CRD

The structure of the `v2alpha1` API is defined in [`v2alpha1` custom resource documentation](../user/custom-resources/apirule/v2alpha1/04-10-apirule-custom-resource.md).

The new version of the `APIRule` CRD introduces the following changes:
- The `APIRule` authorization policy is now based solely on Istio. The `APIRule` CRD no longer supports the Ory Oathkeeper authorization policy.
- The available access strategies are now limited to `JWT`, `NoAuth`, and soon incoming is support for `ExtAuth`. You can find more information about the strategies in the [access strategies documentation](../user/custom-resources/apirule/v2alpha1/04-15-api-rule-access-strategies.md) and the [ADR](https://github.com/kyma-project/api-gateway/issues/938) for ExtAuth strategy.

The new version is not backward compatible with `v1beta1`.

## Migrating from version `v1beta1` to `v2alpha1`

Migration from version `v1beta1` to `v2alpha1` is not automatic.
You must manually migrate your `APIRule` CRs to the new version.
If you are using `v1beta1` access strategies that rely on Ory Oathkeeper, which are any of the following:
- `noop`
- `unauthorized`
- `anonymous`
- `cookie_session`
- `bearer_token`
- `oauth2_client_credentials`
- `oauth2_introspection`
- `jwt`

then you must update your authorization flow to use the new `JWT` or `NoAuth` access strategies.
Make sure your target workload is injected with the Istio sidecar in case you are using the `JWT` access strategy.

In case you are using the `no_auth` access strategy, you can continue using it in the new version, with the updated API structure.
The `allow` access strategy is not supported in the new version and should be replaced with the `NoAuth` access strategy.

After you apply your configuration in the new version, the API Gateway will automatically update your configuration to Istio, making sure that no downtime occurs during the migration.

## New Features

- Change Ory Oathkeeper's scaling to be based only on CPU utilization. This adjustment ensures that the scaling is more responsive to traffic changes, as Oathkeeper memory utilization is not a good indicator of the traffic load.
- Introduce APIRule in version `v2alpha1` [#996](https://github.com/kyma-project/api-gateway/pull/996)

## Bug Fixes

- Fix rendering of APIRule list when multiple APIRules exist [#1069](https://github.com/kyma-project/api-gateway/pull/1069)
