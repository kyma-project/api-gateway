apiVersion: gateway.kyma-project.io/v2
kind: APIRule
metadata:
    name: "{{ .Name }}"
spec:
    gateway: "{{ .Gateway }}"
    hosts:
        - "{{ .Host }}"
    service:
        name: "{{ .ServiceName }}"
        port: {{ .ServicePort }}
    rules:
    - path: {{ .JwtSecuredPathWithService }}
      service:
        name: "{{ .ServiceName }}"
        port: {{ .ServicePort }}
      methods: ["GET"]
      jwt:
        authentications:
          - issuer: "{{ .Issuer }}"
            jwksUri: "{{ .JwksUri }}"
    - path: {{ .JwtSecuredPathWithoutService }}
      methods: ["GET"]
      jwt:
        authentications:
          - issuer: "{{ .Issuer }}"
            jwksUri: "{{ .JwksUri }}"
