apiVersion: gateway.kyma-project.io/v2
kind: APIRule
metadata:
    name: "{{ .Name }}"
spec:
    gateway: "{{ .Gateway }}"
    hosts:
        - "{{ .Host }}"
    service:
        name: "{{ .ServiceName }}"
        namespace: "{{ .ServiceNamespace }}"
        port: {{ .ServicePort }}
    rules:
    - path: {{ .JwtSecuredPath }}
      methods: ["GET"]
      jwt:
        authentications:
          - issuer: "{{ .Issuer }}"
            jwksUri: "{{ .JwksUri }}"
    - path: {{ .OtherNamespaceJwtSecuredPath }}
      service:
        namespace: "{{ .OtherNamespace }}"
        name: "{{ .OtherNamespaceServiceName }}"
        port: {{ .OtherNamespaceServicePort }}
      methods: ["GET"]
      jwt:
        authentications:
          - issuer: "{{ .Issuer }}"
            jwksUri: "{{ .JwksUri }}"
